{% extends "templates/pages/base.html" %}

{% block title %}My Issues{% endblock %}

{% block content %}
    
<div class="max-w-3xl mx-auto p-6">

    <h2 class="text-3xl font-semibold mb-6">My Issues</h2>
    
    {% if issues %}
        <div class="space-y-4">
            {% for i in issues %}
            <a href="/issue-detail?name={{i.name}}" class="block p-4 rounded-xl border shadow hover:bg-gray-50">

                <div class="flex justify-between items-center mb-2">
                    <h3 class="text-xl font-semibold">{{ i.category }}</h3>

                    <!-- Status Badge -->
                    {% if i.status == "Open" %}
                        <span class="px-3 py-1 rounded-full text-sm bg-red-100 text-red-700">{{ i.status }}</span>
                    {% elif i.status == "Assigned" %}
                        <span class="px-3 py-1 rounded-full text-sm bg-blue-100 text-blue-700">{{ i.status }}</span>
                    {% elif i.status == "In Progress" %}
                        <span class="px-3 py-1 rounded-full text-sm bg-yellow-100 text-yellow-700">{{ i.status }}</span>
                    {% elif i.status == "Resolved" %}
                        <span class="px-3 py-1 rounded-full text-sm bg-green-100 text-green-700">{{ i.status }}</span>
                    {% else %}
                        <span class="px-3 py-1 rounded-full text-sm bg-gray-200 text-gray-700">{{ i.status }}</span>
                    {% endif %}
                </div>

                <!-- Description preview -->
                <p class="text-gray-600">
                    {{ i.description[:120] }}{% if i.description|length > 120 %}...{% endif %}
                </p>

                <p class="text-sm text-gray-500 mt-2">Updated: {{ i.modified.strftime("%d %b %Y %I:%M %p") }}</p>
            </a>
            {% endfor %}
        </div>

    {% else %}
        <p class="text-gray-500">You have not reported any issues yet.</p>
    {% endif %}

</div>

{% endblock %}